# RTP Payload for Redundant Audio Data

## 摘要

本文档描述了用于实时传输协议 (RTP) version 2 的有效负载格式，用于编码冗余音频数据。本文描述的方案的主要目的是开发用于有损分组网络 (如 Internet Mbone) 的音频会议工具，尽管该方案并不局限于这些应用程序。

## 1. 介绍

如果多媒体会议要被 Internet Mbone 社区广泛使用，用户必须认为它的质量对大多数应用程序来说足够好。我们已经发现了一些影响会议质量的问题，其中最严重的是丢包问题。这是一个长期存在的问题，特别是考虑到互联网的日益普及和因此增加的负载。即使在低丢包率的情况下，语音清晰度也会受到破坏，这可能会使多数用户误认为通过互联网进行多媒体会议是不可行的。在数据流中增加冗余是一种解决方案。如果一个包丢失了，在平均连续丢失包数较小的情况下，接收端可以从下一个包中到达的冗余数据重建丢失的信息。最近的工作 [4,5] 表明，互联网中的丢包模式是这样的，该方案通常功能良好。

本文档描述了以这种冗余方式编码的音频数据传输的 RTP 有效载荷格式。第 2 节介绍了导致此有效载荷格式定义的需求和动机，但不构成有效载荷格式定义的一部分。第 3 节定义了冗余音频数据的 RTP 有效载荷格式。

## 2. 需求/动机

RTP下对冗余编码方案的要求如下:

- 数据包必须携带一个主编码和一个或多个冗余编码。
- 由于冗余信息可使用多种编码，因此每一段冗余编码必须有一种编码类型标识符。
- 由于需要使用可变大小编码，数据包中的每个编码块必须有一个长度指示器。
- RTP报头提供了一个时间戳字段，对应于编码数据创建的时间。当使用冗余编码时，这个时间戳字段可以指主要编码数据的创建时间。冗余的数据块将与主要数据对应不同的时间间隔，因此每个冗余编码块将需要自己的时间戳。为了减少携带时间戳所需的字节数，可以将其编码为冗余编码的时间戳与主服务器的时间戳的差值。

有两种基本的方法可以将冗余音频添加到标准RTP规范中:头扩展可以保留冗余，或者可以定义一个或多个额外的负载类型。

在报头扩展中包含包的所有冗余信息将使不实现冗余的应用程序很容易丢弃冗余，只处理主要编码数据。然而，这个方案也有一些缺点:

- 扩展头需要的字节数(4)和可能的填充，在扩展结束时需要四舍五入到一个4字节的边界(3字节)有很大的开销。对于许多应用程序来说，这种开销是不可接受的。
- 头扩展的使用限制了应用程序的单一冗余编码，除非进一步的结构被引入扩展。这将导致进一步的开销。

由于这些原因，使用RTP报头扩展来保存冗余音频编码被忽略了。

音频和视频会议的RTP配置文件[3]列出了一组有效负载类型，并提供了32种编码的动态范围，这些编码可以通过会议控制协议定义。这导致了两种可能的方案，为冗余音频应用程序分配额外的RTP有效负载类型:

1.可以使用RTP动态有效载荷类型范围，为每个主/冗余有效载荷类型组合定义动态编码方案。
2.可以定义单个固定的有效负载类型来表示具有冗余的数据包。然后可以将其分配给静态RTP负载类型，也可以动态分配其负载类型。

可以定义一组有效载荷类型，表示所提供的32种动态有效载荷类型的主编码和次编码的特定组合。对于具有单个冗余块的数据包，这将是一个稍微有限制但可行的解决方案，因为可能的组合的数量不是太大。然而，对多个冗余块的需求大大增加了编码组合的数量，使这种解决方案不可行的。

上述解决方案的一个修改版本可以是在会议开始之前，在一组上决定在会议期间使用的32种编码组合。会议中的所有工具都可以用这个编码组合的工作集进行初始化。工作集的通信可以通过使用外部的、带外的机制来实现。安装是复杂的，因为在使用相同的参数启动工具时需要非常小心。这种方案更有效，因为只使用一个字节来标识编码组合。
人们认为，将有效载荷类型映射到冗余数据的组合中所固有的复杂性妨碍了这种机制的使用。

一个更灵活的解决方案是使用单一的有效负载类型来表示具有冗余的数据包。然后，该包成为一个容器，将多个有效负载封装到单个RTP包中。这种方案是灵活的，因为任何数量的冗余可以封装在单个包中。但是，由于每个封装的有效负载前面必须有一个指示所封装数据类型的头，因此开销很小。这是首选的解决方案，因为它既灵活、可扩展，而且开销相对较低。本文档的其余部分将描述此解决方案。

## 3. 负载格式定义

## 4. 限制

## 5. SDP 相关

## 6. 安全考虑

## 7. 示例
